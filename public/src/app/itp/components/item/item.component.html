<section class="container general-bg">
  <!-- Cards for items-->
  <div class="d-flex justify-content-between align-items-center pt-4 pb-2 px-4">
    <h3 class="">Listings</h3>
    <div class="dropdown" type="button" id="dropdownMenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <button class="btn btn-primary btn-sm dropdown-toggle">
        Filter by Type
      </button>

      <div class="dropdown-menu" aria-labelledby="dropdownMenu">
        <button class="dropdown-item" (click)="getListings()">
          Clear
        </button>
        <div class="dropdown-divider"></div>
        <button class="dropdown-item" *ngFor="let type of listingTypes" (click)="onFilterClick(type)">
          {{ type }}
        </button>
      </div>
    </div>
  </div>
  <ul class="list-group pb-4">
    <li
      class="list-group-item d-flex flex-wrap justify-content-center"
      *ngFor="let listing of listings"
    >
      <div>
        <img src="{{ listing.item.image }}" />
      </div>
      <div class="flex-fill text-center my-auto" style="min-width: 13rem;">
        <h5>{{ listing.item.name | titlecase }}</h5>
        <p class="m-0">The price goes here</p>
        <p class="m-0">
          <small>{{ listing.seller.name }}</small>
        </p>
        <p class="m-0">
          <small>{{ listing.created_at | date: "mediumDate" }}</small>
        </p>
      </div>
      <div class="my-auto">
        <button
          class="btn btn-outline-danger"
          *ngIf="listing.seller.name == 'Zaylia'; else notSeller"
        >
          Delete
        </button>
        <ng-template #notSeller
          ><button class="btn btn-outline-primary">
            Request Trade
          </button></ng-template
        >
      </div>
    </li>
  </ul>
  <div>
    <ul class="pagination">
      <li class="page-item">
        <button class="page-link" (onClick)=onPageChange(1)>First</button>
      </li>
      <li class="page-item">
        <button class="page-link" (onClick)=onPageChange(this.page-1)>Previous</button>
      </li>
      <li class="page-item" *ngFor="let page of ' '.repeat(this.totalPages-1).split(' '); let i = index">
        <button class="page-link" (onClick)=onPageChange(i+1)>{{ i + 1 }}</button>
      </li>
      <li class="page-item">
        <button class="page-link" (onClick)=onPageChange(this.page+1)>Next</button>
      </li>
      <li class="page-item">
        <button class="page-link" (onClick)=onPageChange(this.totalPages)>Last</button>
      </li>

    </ul>

  </div>
</section>

